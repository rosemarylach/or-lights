#:kivy 1.0.9

# use below to view widget space:
# canvas:
#     Color:
#         rgba: 0, 0, 1, 0.3
#     Rectangle:
#         pos: self.pos  # incorrect
#         size: self.size

PageManager:
    LandingPage:
    HomePage:
    CalibrationPage:
    DefinePage:
    AdjustPage:

# <RightTriangleButton@Button>:
#     canvas:
#         # Color:
#         #     rgba: 0, 1, 0, 0.5
#         # RoundedRectangle:
#         #     size: self.size
#         #     pos: self.pos
#         #     radius: [55]  #---- This rounds the corners --- #
#         Triangle:
#             points:[self.x, self.y, self.x, self.y+self.height, self.x+self.width, self.y+self.height/2]

<LandingPage>:
    name: "landing_page"

    FloatLayout:

        Button:
            text: "CONNECT"
            size_hint: (0.3, 0.2)
            pos_hint: {'x': 0.35, "y": 0.2}

            on_release:
                app.root.current = "home_page"
                root.manager.transition.direction = "left"

<HomePage>:
    name: "home_page"

    FloatLayout:

        KivyCamera:
            allow_stretch: True
            size_hint_y: 0.9
            size_hint_x: 0.9* 9/16 * root.height / root.width
            pos_hint: {"center_x": 0.25, "center_y": 0.5}

        Button:
            text: "Calibrate"
            size_hint: (0.3, 0.2)
            pos_hint: {"center_x": 0.75, "center_y": 0.75}

            on_release:
                app.root.current = "calibration_page"
                root.manager.transition.direction = "left"

        Button:
            text: "Define ZOIL"
            size_hint: (0.3, 0.2)
            pos_hint: {"center_x": 0.75, "center_y": 0.5}

            on_release:
                app.root.current = "define_page"
                root.manager.transition.direction = "left"

        Button:
            text: "Load Configuration"
            size_hint: (0.3, 0.2)
            pos_hint: {"center_x": 0.75, "center_y": 0.25}

            on_release:
                app.root.current = "home_page"
                root.manager.transition.direction = "left"

<CalibrationPage>:
    name: "calibration_page"

    FloatLayout:
        
        KivyCamera:
            allow_stretch: True
            size_hint_y: 0.9
            size_hint_x: 0.9 * 9/16 * self.parent.height / self.parent.width
            pos_hint: {"center_x": 0.25, "center_y": 0.5}

        RectDrawingWidget:
            id: cal_dims
            size_hint_y: 0.9
            size_hint_x: 0.9 * 9/16 * self.parent.height / self.parent.width
            pos_hint: {"center_x": 0.25, "center_y": 0.5}

        TextInput:
            size_hint: (0.3, 0.1)
            pos_hint: {"center_x": 0.75, "center_y": 0.8}

        TextInput:
            size_hint: (0.3, 0.1)
            pos_hint: {"center_x": 0.75, "center_y": 0.65}

        TextInput:
            size_hint: (0.3, 0.1)
            pos_hint: {"center_x": 0.75, "center_y": 0.5}

        MDIconButton:
            icon: "home"
            size_hint: (0.3, 0.2)
            pos_hint: {"center_x": 0.75, "center_y": 0.25}

            on_release:
                app.root.current = "home_page"
                root.manager.transition.direction = "left"


<DefinePage>:
    name: "define_page"

    FloatLayout:
        
        KivyCamera:
            allow_stretch: True
            size_hint_y: 0.9
            size_hint_x: 0.9 * 9/16 * self.parent.height / self.parent.width
            pos_hint: {"center_x": 0.25, "center_y": 0.5}

        CircleDrawingWidget:
            id: zoil_coords
            size_hint_y: 0.9
            size_hint_x: 0.9 * 9/16 * self.parent.height / self.parent.width
            pos_hint: {"center_x": 0.25, "center_y": 0.5}

        MDIconButton:
            icon: "home"
            size_hint: (0.3, 0.2)
            pos_hint: {"center_x": 0.75, "center_y": 0.15}

            on_release:
                app.root.current = "home_page"
                root.manager.transition.direction = "left"

        MDIconButton:
            icon: "chevron-down-circle-outline"
            size_hint: (0.1, 0.1)
            pos_hint: {"center_x": 0.75, "center_y": 0.6}

            on_release:
                zoil_coords.shift(0, -4)

        MDIconButton:
            icon: "chevron-up-circle-outline"
            size_hint: (0.1, 0.1)
            pos_hint: {"center_x": 0.75, "center_y": 0.8}

            on_release:
                zoil_coords.shift(0, 4)

        MDIconButton:
            icon: "chevron-left-circle-outline"
            size_hint: (0.1, 0.1)
            pos_hint: {"center_x": 0.65, "center_y": 0.7}

            on_release:
                zoil_coords.shift(-4, 0)

        MDIconButton:
            icon: "chevron-right-circle-outline"
            size_hint: (0.1, 0.1)
            pos_hint: {"center_x": 0.85, "center_y": 0.7}

            on_release:
                zoil_coords.shift(4, 0)

        MDIconButton:
            icon: "minus-circle"
            size_hint: (0.1, 0.1)
            pos_hint: {"center_x": 0.7, "center_y": 0.4}

            on_release:
                zoil_coords.resize(-4)

        MDIconButton:
            icon: "plus-circle"
            size_hint: (0.1, 0.1)
            pos_hint: {"center_x": 0.8, "center_y": 0.4}

            on_release:
                zoil_coords.resize(4)

        MDSlider:
            size_hint: (0.35, 0.1)
            hint: False
            pos_hint: {"center_x": 0.75, "center_y": 0.3}

<AdjustPage>:
    name: "adjust_page"